#include "LPC17xx.h"

void adc_cfg(void) {
	LPC_SC->PCLKSEL0&=~(0x3<<24); // CLEAR BITS 25:24
	LPC_SC->PCLKSEL0|=0x00;	// PCLK_ADC = CCLK/4
	LPC_SC->PCONP|=0x1<<12;	// ADC 0 POWER ON
	LPC_PINCON->PINSEL1|=(0x01<<16); // P0.24 PIN AS AD0.1 INPUT
	LPC_PINCON->PINMODE1|=(0x2<<16);	// P0.24: DISABLE PULL-UP & DOWN
	LPC_ADC->ADCR=(0x01U<<1)|(0x01U<<8)|(0x04U<<24); //	CHANNEL SELECT | POWER ON | START ON MAT0.1
	LPC_ADC->ADINTEN=0x1<<1;	// JUST AD0.1 INTERRUPT ENABLE
	LPC_ADC->ADCR|=(0x01U<<21); //	POWER ON
}
